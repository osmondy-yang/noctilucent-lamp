## OSI参考模型

![img](https://raw.githubusercontent.com/Light-Towers/picture/master/noctilucent-lamp/OSI%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B.png)

## TCP/IP五层模型

![img](https://raw.githubusercontent.com/Light-Towers/picture/master/noctilucent-lamp/%E4%BA%94%E5%B1%82%E6%A8%A1%E5%9E%8B.png)

## IP协议的首部结构

首部协议一共是20个字节（固定）

第一个4字节： 版本号；首部长度； 服务类型；总长度；

第二个4字节：标识；标志；片偏移；

第三个4字节：生存时间；协议；校验和；

第四个4字节：源ip地址；

第五个4字节：目的ip地址

## TCP（传输控制协议）是什么？

TCP是传输控制协议，是TCP/IP体系中非常复杂的一个协议，属于运输层协议。与UDP协议一样用于处理应用层的数据。它和UDP一样具有复用和分用的功能以及差错检测的功能。UDP的主要特点是：

- 面向连接: 应用程序在使用TCP之前必须两端之间先建立TCP连接。当确认数据传输完成之后，必须要释放TCP连接。
- 单播: TCP只能有两个端点，进行点对点的传输，不支持多播和广播传输。
- 可靠交付: 通过TCP连接传送的数据是没有差错、不会丢失、不重复并且按序到达的。
- 全双工通信: TCP允许连接的双方可以在任何时候发送数据，双方都有发送缓存和接收缓存。应用程序把数据给发送缓存之后就可以做其他的事情了，TCP发送缓存会在合适的时候自己把缓存中的数据发送出去。在接受的时候TCP会把数据存进接收缓存，上层应用程序会在合适的时候读取数据。也正因为是全双工通信方式，建立连接时最少需要三次信息确认，也就是三次握手，断开连接时最少需要四次信息确认，也就是所谓的四次挥手。
- 面向字节流: TC不像UDP每一个数据报独立传输，而是在不保留报文边界的情况下以字节流的方式进行传输，这也是长连接的由来。TCP中的“流”就是指流入到进程或从进程流出的字节序列。
- 头部开销大: 最小20字节，最大60字节。加上TCP的可靠传输机制功能的影响，数据传输效率比UDP慢很多。

### 重传机制

- 超时重传
  - 两种情况发生超时重传
    - 数据包丢失
    - 确认应答丢失
  - 概念：
    - `RTT`（Round-Trip Time 往返时延）：*数据发送时刻*至*接收到确认时刻*的差值
    - `RTO` （Retransmission Timeout 超时重传时间）。
  - **结论：超时重传时间 RTO 的值应该略大于报文往返 RTT 的值**。
- 快速重传
- SACK
- D-SACK



## Refrence

[1]: https://www.cnblogs.com/xiaolincoding/p/12732052.html	"30张图解： TCP 重传、滑动窗口、流量控制、拥塞控制"
